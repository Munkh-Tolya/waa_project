<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml" layout:decorate="~{layouts/main}"
      xmlns:th="http://www.thymeleaf.org" >

<head>
    <title>Check out page</title>
    <link rel='stylesheet' type='text/css' media='screen' th:href="@{/css/checkout.css}">
    <script th:src="@{/js/checkout.js}"></script>
</head>
<body>
<div class="container" layout:fragment="main-content">
    <section id="checkout" class="active mb30">
        <div class="row">
            <div class="col-md-8 col-sm-8">
                <form th:action="@{/buyer/order/save}" th:object="${order}" th:method="POST">
                    <div class="row">
                        <div class="col-sm">
                            <div class="border-gray">
                                <h4>Shipping address</h4>
                                <div class="row">
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Street</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{shippingAddress.street}">
                                             <small class="form-text" th:if="${#fields.hasErrors('shippingAddress.street')}" th:errors="*{shippingAddress.street}" th:errorclass="text-danger">Invalid street.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">City</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{shippingAddress.city}">
                                            <small class="form-text" th:if="${#fields.hasErrors('shippingAddress.city')}" th:errors="*{shippingAddress.city}" th:errorclass="text-danger">Invalid city.</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">State</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{shippingAddress.state}">
                                            <small class="form-text" th:if="${#fields.hasErrors('shippingAddress.state')}" th:errors="*{shippingAddress.state}" th:errorclass="text-danger">Invalid state.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Postal code</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{shippingAddress.postalCode}">
                                            <small class="form-text" th:if="${#fields.hasErrors('shippingAddress.postalCode')}" th:errors="*{shippingAddress.postalCode}" th:errorclass="text-danger">Invalid postal code.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Country</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{shippingAddress.country}">
                                            <small class="form-text" th:if="${#fields.hasErrors('shippingAddress.country')}" th:errors="*{shippingAddress.country}" th:errorclass="text-danger">Invalid postal code.</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm">
                            <div class="border-gray">
                                <h4>Billing address</h4>
                                <div class="row">
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Street</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{billingAddress.street}">
                                            <small class="form-text" th:if="${#fields.hasErrors('billingAddress.street')}" th:errors="*{billingAddress.street}" th:errorclass="text-danger">Invalid street.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">City</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{billingAddress.city}">
                                            <small class="form-text" th:if="${#fields.hasErrors('billingAddress.city')}" th:errors="*{billingAddress.city}" th:errorclass="text-danger">Invalid city.</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">State</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{billingAddress.state}">
                                            <small class="form-text" th:if="${#fields.hasErrors('billingAddress.state')}" th:errors="*{billingAddress.state}" th:errorclass="text-danger">Invalid state.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Postal code</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{billingAddress.postalCode}">
                                            <small class="form-text" th:if="${#fields.hasErrors('billingAddress.postalCode')}" th:errors="*{billingAddress.postalCode}" th:errorclass="text-danger">Invalid postal code.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Country</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{billingAddress.country}">
                                            <small class="form-text" th:if="${#fields.hasErrors('billingAddress.country')}" th:errors="*{billingAddress.country}" th:errorclass="text-danger">Invalid postal code.</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-8">
                            <div class="border-gray mt-4">
                                <h4>Payment</h4>
                                <div class="row">
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Card number</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{payment.cartNumber}">
                                            <small class="form-text text-muted">We'll never share your card number with anyone else.</small>
                                            <small class="form-text" th:if="${#fields.hasErrors('payment.cartNumber')}" th:errors="*{payment.cartNumber}" th:errorclass="text-danger">Invalid card number.</small>
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="form-group">
                                            <label class="required">Name on card</label>
                                            <input type="text" class="form-control form-control-sm" th:field="*{payment.nameOnCard}">
                                            <small class="form-text" th:if="${#fields.hasErrors('payment.nameOnCard')}" th:errors="*{payment.nameOnCard}" th:errorclass="text-danger">Invalid name.</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="required">Expiration date</label>
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <select class="form-control form-control-sm" id="monthpicker" th:field="*{payment.expriyMonth}">
                                            </select>
                                            <small class="form-text" th:if="${#fields.hasErrors('payment.expriyMonth')}" th:errors="*{payment.expriyMonth}" th:errorclass="text-danger">Invalid month.</small>
                                        </div>
                                        <div class="col-sm-3">
                                            <select class="form-control form-control-sm"  id="yearpicker" th:field="*{payment.expriryYear}">
                                            </select>
                                            <small class="form-text" th:if="${#fields.hasErrors('payment.expriryYear')}" th:errors="*{payment.expriryYear}" th:errorclass="text-danger">Invalid year.</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="sellerId" th:value="${sellerId}" />
                            <span th:if="${discount!=null}">
                                <input type="hidden" name="coupon" value="1" />
                            </span>
                            <button type="submit" class="btn-core btn-blue mt-4">Finish</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-4 col-sm-4">
                <section class="order-details border-gray">
                    <h4>Shopping cart</h4>
                    <table class="table table-bordered">
                        <thead class="thead-light">
                        <tr>
                            <th scope="col">Product</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Total</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="item : ${items}">
                            <td th:text="${item.product.name}">Product name</td>
                            <td th:text="${item.quantity}">X</td>
                            <td th:text="${'$' + item.price}"> $470.0</td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="3" class="text-right">
                                <div>
                                    <b>Items total:</b> $<span th:text="${#numbers.formatDecimal(subTotal, 0, 'COMMA', 2, 'POINT')}"></span></br>
                                    <span th:if="${discount!=null}">
                                        <b>Discount:</b> $<span th:text="${#numbers.formatDecimal(discount, 0, 'COMMA', 2, 'POINT')}"></span></br>
                                    </span>
                                    <b>Grand Total:</b> $<span th:text="${#numbers.formatDecimal(grandTotal, 0, 'COMMA', 2, 'POINT')}"></span>
                                </div>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </section>
            </div>
        </div>
    </section>
</div>
</body>
</html>